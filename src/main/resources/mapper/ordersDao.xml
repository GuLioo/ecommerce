<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.ecommerce.dao.ordersDao">
    <!--为DAO接口方法提供SQL语句配置-->
    <insert id="insert">
        insert ignore into orders(userId,money,state)
        values (#{userId},#{money},#{state})
    </insert>
    <select id="selectAll" resultType="orders">
        select * from orders
    </select>
    <select id="findOrderByUid" parameterType="Integer" resultType="orders">
      select *
      from orders
      where userId=#{userId}
    </select>
    <select id="findOrderByOid_State_Time"  resultType="orders">
      select *
      from orders
      <where>
          <if test="oid != null">
              oid = #{oid,jdbcType=VARCHAR}
          </if>
          <if test="state != null">
              and state = #{state,jdbcType=VARCHAR}
          </if>
          <if test="fromTime != null" >
              and #{fromTime}<![CDATA[<=]]> order_time
          </if>
          <if test="toTime != null" >
              and #{toTime}>=order_time
          </if>
      </where>
    </select>
    <select id="countProducyAll" resultType="Integer">
        select count(*) from orders
    </select>

</mapper>